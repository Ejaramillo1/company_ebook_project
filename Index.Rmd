---
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)


library(easypackages)
my_packages <- c("tidyverse", "readxl", "lubridate")
libraries(my_packages)


BIE_BIE20180126152150 <- read_excel("C:/Users/pvelazquez/Google Drive/Sector Industrial en Tijuana/Bases de datos/INDICADORES_ECONOMICOS_DE_COYUNTURA/BIE_BIE20180126152150.xlsx", 
                                    col_names = TRUE, skip = 1) %>%
  filter(!is.na(.[,2]))


datos <- BIE_BIE20180126152150 %>%
  rename_all(funs(str_to_lower(.) %>%
                    str_replace(., "proyectos especiales > tablero de indicadores económicos > ", ""))) %>%
  select(contains("construcción")) %>%
  rename( "constr_orig" = "indicadores de producción > índice de volumen físico de la construcción original p2 / f2/ (índice base 2013=100)", 
          "constr_calend" = "indicadores de producción > índice de volumen físico de la construcción original corregida por efectos de calendario f3/ (índice base 2013=100)", 
          "constr_esta" = "indicadores de producción > índice de volumen físico de la construcción desestacionalizada f3/ (índice base 2013=100)", 
          "constr_trend" = "indicadores de producción > índice de volumen físico de la construcción tendencia f3/ (índice base 2013=100)", 
          "constr_cicl" = "indicadores de producción > índice de volumen físico de la construcción ciclo f3/ (puntos)") %>%
  mutate(periodo = BIE_BIE20180126152150$Periodo,
         day = "01") %>%
  separate(periodo, into = c("year", "month"), sep = "\\/") %>%
  mutate(fecha = as_date(paste0(year, month, day))) %>%
  filter(fecha > "2007-01-01")


datos2 <- BIE_BIE20180126152150 %>%
  rename_all(funs(str_to_lower(.) %>%
                    str_replace(., "proyectos especiales > tablero de indicadores económicos > ", ""))) %>%
  select(contains("precios al consumidor")) %>%
  rename("inpc" = "indicadores de precios precios al consumidor f6/ (base segunda quincena de diciembre 2010 = 100)",
         "inpc_sub" = "indicadores de precios precios al consumidor subyacente f6/ (base segunda quincena de diciembre 2010 = 100)") %>%
  mutate(periodo = BIE_BIE20180126152150$Periodo,
         day = "01") %>%
  separate(periodo, into = c("year", "month"), sep = "\\/") %>%
  mutate(fecha = as_date(paste0(year, month, day)),
         inflacion  = (inpc/lag(inpc, 1) -1)*100) %>%
  filter(fecha > "2007-01-01")






```


# EBOOK ATISA
## Indicadores económicos de coyuntura (México)

El comportamiento de los indicadores más relevantes para el sector de la construcción a nivel nacional tuvieron un comportamiento al a baja, el Indicador del volumen físico de la cosntrucción tuvo un comportamiento a la baja, tanto en su componente cíclico y tendencial. 

Se observa así mismo que la inflación mensual medida a través del INPC(Índice Nacional de Precios al Consumidor) sigue una tendencia incremental. Principalmente en los meses de Octubre, Noviembre y Diciembre.


```{r fig.height=2, fig.width=3}

datos %>%
  ggplot(aes(fecha, constr_calend)) + 
  geom_line(colour = "#4f2584", size = 0.2) + 
  geom_smooth(method = "loess", size = 0.2) +
  theme_minimal() + 
  ggtitle("Índice del volumen físico de la construcción") +
  xlab(label = NULL) +
  ylab(label = "Índice") + 
  theme(plot.title = element_text(family = "mono", color = "#666666", face = "bold", size = 5)) +
  theme(axis.title = element_text(family = "mono", color = "#666666", size = 4), axis.text = element_text(size = 4))
  
```



```{r fig.height=2, fig.width=3}

datos %>% 
  ggplot(aes(fecha, constr_cicl)) + 
  geom_line(colour = "#4f2584", size = 0.2) +
  geom_smooth(method = "loess", size = 0.2) +
  theme_minimal() +
  ggtitle("Índice de valor físico de la construcción") +
  xlab(label = NULL) +
  theme(plot.title = element_text(family = "mono", color = "#666666", face = "bold", size = 5)) +
  theme(axis.title = element_text(family = "mono", color = "#666666", size = 4)) + 
  theme(axis.text = element_text(size = 4))


```


```{r fig.height=2, fig.width=3}

datos2 %>%
  ggplot(aes(fecha, inflacion)) + 
  geom_line(colour = "#4f2584", size = 0.2) + 
  geom_smooth(method = "loess", size = 0.2) + 
  theme_minimal() +
  ggtitle("Inflación mensual") + 
  xlab(label = NULL) + 
  theme(plot.title = element_text(family = "mono", color = "#666666", face = "bold", size = 5)) + 
  theme(axis.title = element_text(family = "mono", color = "#666666", face = "bold", size = 4)) +
  theme(axis.text = element_text(size = 4))


```



## Infraestructura comercial de México

```{r}

```


